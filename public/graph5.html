
<!DOCTYPE html><head>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!DOCTYPE html><head></body>

<canvas id='canvas' width='680' height='960'></canvas>
<script>

var c = document.getElementById('canvas'),
	cc = c.getContext('2d'),
	
	
	bubls = [], 
	bublCount= 100,
	depth = 15;

	fon = cc.createLinearGradient(0,0,0,960);
	fon.addColorStop(1,'#021b7f');
	fon.addColorStop(0,'#0b9fdb');

// window.onload=function(){
// 	// c=document.getElementById('gc');
// 	// cc=c.getContext('2d');
// 	setInterval(draw(),1000/30);
// 	// c.addEventListener('mousemove',function(e){
// 	// 	p1y = e.clientY-ph/2
// 	// })
// }

class Bubl{
	constructor(y=c.height+depth,x=c.width-depth){
		this.x = Math.round(Math.random() * c.width);
		this.y = y;
		this.d = Math.round(Math.random() * depth)+1;
		// this.color = 'green'
	}
	get hight(){return this.d};
	get speed(){return this.d};
	get color(){return 'rgba(52, 152, 219,'+ (this.d/depth + .3) +')'};
};



for (i=0;i<bublCount;i++){
	let bubl = new Bubl(Math.round(Math.random() * c.height));
	bubls.push(bubl)
}


setInterval(draw,1000/40)


 // let grad = cc.createRadialGradient(45, 45, 10, 45, 45, 15);
 //        grad.addColorStop(0, '#FF5F98');
 //  		grad.addColorStop(0.75, '#FF0188');
	// 	grad.addColorStop(1, 'rgba(255, 1, 136, 0)');

	// 	cc.fillStyle = grad;
 //  		cc.fillRect(0, 0, 350, 350);


var alfa = 1, beta= 1;

if (window.DeviceMotionEvent != undefined) {
	window.ondevicemotion = function(e) {
		
		if ( e.rotationRate ) {
			alfa = Math.round(e.rotationRate.alpha);
			beta = Math.round(e.rotationRate.beta);
		}		
	}
}


function draw() {
	// let vector = 1;
	// vector = Math.random() < .0001 ? -vector : vector; 
	cc.fillStyle=fon; //'#75C8FF';
	cc.fillRect(0,0,c.width,c.height);
	
  	bubls.forEach((e,index, object)=>{

  		e.y-=e.d/3;
  		e.x+=e.d/8 ;//* vector

  		if (e.y < 0 - e.d || e.x > c.width + e.d) {
  			let b = new Bubl();
  			object[index] = b;
  		}

  		

        let grad = cc.createRadialGradient(

        	beta/10 * e.d/depth + e.x + Math.sin(e.y/15) * (e.d/depth), 		 alfa/10 * e.d/depth + e.y, 		 e.d,
			beta/10 * e.d/depth + e.x + Math.sin(e.y/15) * (e.d/depth) - e.d/2,  alfa/10 * e.d/depth + e.y - e.d/2, e.d + e.d);

        grad.addColorStop(0, 'rgba(255,255,255,0.05)');
  		grad.addColorStop(0.85, 'rgba(255,255,255,.2)');
		grad.addColorStop(1, 'rgba(255, 255, 255, 0)');

		cc.fillStyle = grad;
  		cc.fillRect(0, 0, 680, 960);


  		// cc.fillStyle = 'white';
  		// cc.fillRect(0, 0, 100, 20);
  		// cc.fillStyle = 'black';
  		// cc.fillText('alfa: '+alfa+', beta: '+beta,10,15);

        // cc.strokeStyle = e.color;
        // cc.beginPath();
        // cc.arc(e.x + Math.sin(e.y/15) * (e.d/depth), e.y, e.d, 0, Math.PI * 2, true);
        // cc.stroke();
  	})

}


// draw();  
</script>
</body>